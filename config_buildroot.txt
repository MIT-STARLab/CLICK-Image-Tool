# Buildroot configuration flags
# Primary build flags
BR2_arm=y
BR2_cortex_a53=y
BR2_ARM_FPU_NEON_VFPV4=y
BR2_TOOLCHAIN_BUILDROOT_CXX=y
BR2_TOOLCHAIN_BUILDROOT_GLIBC=y
BR2_BINUTILS_VERSION_2_35_X=y
BR2_BINUTILS_ENABLE_LTO=y
BR2_GCC_VERSION_10_X=y
BR2_GCC_ENABLE_LTO=y
BR2_OPTIMIZE_S=y
BR2_CCACHE=y

# Linux kernel configuration
# Using latest stable 5.9 commit: https://github.com/raspberrypi/linux/tree/rpi-5.9.y
BR2_PACKAGE_HOST_LINUX_HEADERS_CUSTOM_5_9=y
BR2_LINUX_KERNEL=y
BR2_LINUX_KERNEL_XZ=y
BR2_LINUX_KERNEL_CUSTOM_TARBALL=y
BR2_LINUX_KERNEL_CUSTOM_TARBALL_LOCATION="$(call github,raspberrypi,linux,cff5fa15e5d11758db426eee3524a5dfded3c62b)/linux-cff5fa15e5d11758db426eee3524a5dfded3c62b.tar.gz"
BR2_LINUX_KERNEL_DEFCONFIG="bcm2709"
BR2_LINUX_KERNEL_CONFIG_FRAGMENT_FILES="../config_kernel.txt"
BR2_LINUX_KERNEL_DTS_SUPPORT=y
BR2_LINUX_KERNEL_INTREE_DTS_NAME="bcm2710-rpi-cm3"

# Required packages to create the golden image
BR2_PACKAGE_HOST_RASPBERRYPI_USBBOOT=y
BR2_PACKAGE_HOST_DOSFSTOOLS=y
BR2_PACKAGE_HOST_GENIMAGE=y
BR2_PACKAGE_HOST_MTOOLS=y
BR2_PACKAGE_HOST_PYTHON=y
BR2_PACKAGE_RPI_FIRMWARE=y
BR2_PACKAGE_RPI_FIRMWARE_VARIANT_PI=y
BR2_PACKAGE_RPI_FIRMWARE_INSTALL_DTB_OVERLAYS=n
BR2_PACKAGE_RPI_FIRMWARE_CD=y

# Rootfs generation config
BR2_ROOTFS_OVERLAY="../overlay"
BR2_TARGET_ROOTFS_SQUASHFS=y
BR2_TARGET_ROOTFS_SQUASHFS4_XZ=y
BR2_TARGET_ROOTFS_TAR=n
BR2_ROOTFS_POST_FAKEROOT_SCRIPT="../post_build.sh"
BR2_ROOTFS_POST_IMAGE_SCRIPT="../post_image.sh"

# CLICK specific config
BR2_TARGET_GENERIC_ISSUE="Welcome to buildroot kernel \\r (\\l)"
BR2_TARGET_GENERIC_HOSTNAME="click"
BR2_TARGET_GENERIC_ROOT_PASSWD="lasercom"
BR2_TARGET_GENERIC_REMOUNT_ROOTFS_RW=n
BR2_TARGET_LOCALTIME="America/New_York"
BR2_PACKAGE_CLICK_FSW=y

# Basic system packages
BR2_PACKAGE_BUSYBOX=n
BR2_TARGET_GENERIC_GETTY=n
BR2_PACKAGE_UTIL_LINUX_LOGIN=y
BR2_PACKAGE_LINUX_PAM=y
BR2_INIT_SYSTEMD=y
BR2_PACKAGE_SYSTEMD_LOGIND=y
BR2_PACKAGE_SYSTEMD_TIMESYNCD=y
BR2_PACKAGE_SYSTEMD_PSTORE=n
BR2_PACKAGE_SYSTEMD_HOSTNAMED=n
BR2_PACKAGE_SYSTEMD_MYHOSTNAME=n
BR2_PACKAGE_SYSTEMD_VCONSOLE=n
BR2_PACKAGE_SYSTEMD_HWDB=n
BR2_PACKAGE_COREUTILS=y
BR2_PACKAGE_BASH=y
BR2_SYSTEM_BIN_SH_BASH=y
BR2_PACKAGE_PROCPS_NG=y
BR2_PACKAGE_NCURSES=y
BR2_PACKAGE_NCURSES_TARGET_PROGS=y
BR2_PACKAGE_GREP=y

# Extra package list
BR2_PACKAGE_LIBUSB=y
BR2_PACKAGE_E2FSPROGS=y
BR2_PACKAGE_PPPD=y
BR2_PACKAGE_ZEROMQ=y
BR2_PACKAGE_CZMQ=y
BR2_PACKAGE_ZMQPP=y
BR2_PACKAGE_PYTHON=y
BR2_PACKAGE_PYTHON_PY_PYC=y
BR2_PACKAGE_PYTHON_PYZMQ=y
BR2_PACKAGE_DROPBEAR=y
BR2_PACKAGE_DROPBEAR_CLIENT=n
BR2_PACKAGE_DROPBEAR_SMALL=y
BR2_PACKAGE_PNG2JPEG=y
